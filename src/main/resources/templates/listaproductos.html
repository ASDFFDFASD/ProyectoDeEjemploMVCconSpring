<!DOCTYPE html>
<html>
    <head>
        <!--Import Google Icon Font-->
        <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!--Import materialize.css-->
        <link type="text/css" rel="stylesheet" href="css/materialize.css"  media="screen,projection"/>

        <!--Let browser know website is optimized for mobile-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
    </head>

    <body>

        <nav>
            <div class="nav-wrapper cyan accent-4">

                <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
                <ul class="right hide-on-med-and-down">
                    <li><a href="#" class="waves-effect waves-light">Ayuda</a></li>
                    <li><a href="#" class="waves-effect waves-light">Salir</a></li>

                </ul>
                <ul class="side-nav fixed" id="mobile-demo">

                    <li><div class="userView">
                            <div class="background">
                                <img src="images/back3.jpg" class="responsive-img">
                            </div>
                            <a href="#!user"><img class="circle large" src="images/sasha-grey.jpg"></a>
                            <a href="#!name"><span class="white-text name">Sasha Gray</span></a>
                            <a href="#!email"><span class="white-text email">srta_sasha@inacap.cl</span></a>
                        </div>
                    </li>

                    <li class="no-padding">
                        <ul class="collapsible collapsible-accordion">
                            <li>
                                <a class="collapsible-header waves-effect waves-yellow">Productos<i class="material-icons">arrow_drop_down</i></a>
                                <div class="collapsible-body">
                                    <ul>
                                        <li><a href="nuevoproducto" class="waves-effect waves-yellow">Nuevo Producto</a></li>
                                        <li><a href="listarproductos" class="waves-effect waves-yellow">Listar Productos</a></li>
                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </li>

                    <li class="no-padding">
                        <ul class="collapsible collapsible-accordion">
                            <li>
                                <a class="collapsible-header waves-effect waves-yellow">Categorías<i class="material-icons">arrow_drop_down</i></a>
                                <div class="collapsible-body">
                                    <ul>
                                        <li><a href="nuevacategoria" class="waves-effect waves-yellow">Nueva Categoría</a></li>
                                        <li><a href="listarcategorias" class="waves-effect waves-yellow">Listar Categorías</a></li>

                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </li>



                </ul>
            </div>
        </nav>



        <!-- Page Layout here -->
        <div class="row">

            <div class="col s8 m8 l8 xl8 offset-m1 offset-l4 offset-xl3"> <!-- Note that "m8 l9" was added -->

                <h3 class="cyan-text text-darken-3">Lista de Productos</h3>

                <div class="row">
                    <table class="highlight centered">
                        <thead>
                            <tr>


                                <th>Nombre Prodcuto</th>
                                <th>Detalle Producto</th>
                                <th>Stock Producto</th>
                                <th>Precio Producto</th>
                                <th>Categoria Producto</th>
                                <th>Visible</th>

                            </tr>
                        </thead>

                        <tbody>
                            {{#producto}}
                            <tr id="{{idProducto}}">

                                <td>{{nombreProducto}}</td>
                                <td>{{detalleProducto}}</td>
                                <td>{{cantidadProducto}}</td>
                                <td>{{precioProducto}}</td>
                                <td>{{categoriaProducto}}</td>
                                <td>{{visible}}</td>
                                <td>
                                    <a class="btn-floating yellow darken-1 btnVerDetalle" href="#verDetalleModal"><i class="material-icons">search</i></a>
                                    <a class="btn-floating green  btnEditar" href="#editarModal"><i class="material-icons">mode_edit</i></a>
                                    <a class="btn-floating red btnEliminar" href="#eliminarModal"><i class="material-icons">delete</i></a>
                                </td>
                            </tr>
                            {{/producto}}
                        </tbody>
                    </table>
                </div>


            </div>
             

            <div class="col s12 m8 l9">

            </div>

        </div>
        <div id="verDetalleModal" class="modal modal-fixed-footer">
            <div class="modal-content">
                <h4>Detalle Producto</h4>
                <div class="divider"></div>

                <div class="section">
                    <h5>Nombre Producto</h5>
                    <p id="pNombre"></p>
                </div>

                <div class="section">
                    <h5>Detalle Producto</h5>
                    <p id="pDetalle"></p>
                </div>

                <div class="section">
                    <h5>Cantidad Producto</h5>
                    <p id="pCantidad"></p>
                </div>
                <div class="section">
                    <h5>Precio Producto</h5>
                    <p id="pPrecio"></p>
                </div>
                <div class="section">
                    <h5>Categoria Producto</h5>
                    <p id="pCategoria"></p>
                </div>
                <div class="section">
                    <h5>Visibilidad del Producto</h5>
                    <p id="pVisible"></p>
                </div>


            </div>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Aceptar</a>
            </div>
        </div>



        <div id="eliminarModal" class="modal">
            <div class="modal-content">
                <h4>¿Desea eliminar este producto?</h4>
                <div class="divider"></div>
                <h6>Nombre producto</h6>
                <p id="pENombre"></p>
                <div class="divider"></div>
                <h6>Detalle producto </h6>
                <p id="pEDetalle"></p>

                <form action="eliminarproducto" method="POST">
                    <div class="row hide">
                        <div class="input-field col s12">
                            <input id="txtIDEliminar" name="idProducto" type="text" class="validate">
                            <label for="txtID">ID Categoría</label>
                        </div>
                    </div>  

                    <button class="btn waves-effect waves-light" type="submit" name="action">Eliminar
                        <i class="material-icons right">delete</i>
                    </button>

                </form>
            </div>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Cerrar</a>
            </div>
        </div>


        <div id="editarModal" class="modal modal-fixed-footer">
            <div class="modal-content">
                <h4>Detalle Producto</h4>
                <div class="divider"></div>


                <form class="col s12" action="modificarproducto" method="POST" >
                    <div class="row hide">
                        <div class="input-field col s12">
                            <input id="txtID" name="idProducto" type="text" class="validate">
                            <label for="txtID">ID Categoría</label>
                        </div>
                    </div>  



                    <div class="row">
                        <div class="input-field col s12">
                            <input id="txtNombre" name="nombreProducto" type="text" class="validate">
                            <label for="txtNombre">Nombre Producto</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <input id="txtDetalle" name="detalleProducto" type="text" class="validate">
                            <label for="txtDetalle">Detalle Producto</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s6">
                            <input id="txtcantidad" name="cantidadProducto" type="text" class="validate">
                            <label for="txtcantidad">Cantidad Producto</label>
                        </div>
                        <div class="input-field col s6">
                            <input id="txtprecio" name="precioProducto" type="text" class="validate">
                            <label for="txtprecio">Precio Producto</label>
                        </div>
                    </div>

                    <div class="row">

                        <div class="input-field col s12">
                            <select name="categoriaProducto" required=""> 
                                <option value="" disabled selected>Selecciona una opción</option>
                                {{#categoria}}
                                <option value="{{nombre}}"> {{nombre}} </option>
                                {{/categoria}}
                            </select>
                            <label>Categoría</label>
                        </div>
                            <div class="input-field col s4 offset-s2">
                                <input class="hide" type="text" id="disponible" name="visible" value="Visible" />
                                <input type="checkbox" id="opcion" checked="checked" />
                                <label for="opcion">Visible</label>
                            </div>





                    </div>

            </div>


            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Aceptar</a>
                <button class="btn waves-effect waves-light" type="submit" name="action">Guardar
                    <i class="material-icons left">send</i>
                </button>
                </form>
            </div>


        </div>


        <!--Import jQuery before materialize.js-->
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script type="text/javascript" src="js/materialize.min.js"></script>

        <script>

$(document).ready(function () {

    $(".button-collapse").sideNav();
    //$(".side-nav").sideNav('show');
    $('.collapsible').collapsible();
    $('.modal').modal();
    $('select').material_select();

    $('.btnVerDetalle').click(function () {

        var nombre = $(this).parents('tr').find('td')[0].innerHTML;
        var detalle = $(this).parents('tr').find('td')[1].innerHTML;
        var cantidad = $(this).parents('tr').find('td')[2].innerHTML;
        var precio = $(this).parents('tr').find('td')[3].innerHTML;
        var categoria = $(this).parents('tr').find('td')[4].innerHTML;
        var visible = $(this).parents('tr').find('td')[5].innerHTML;
        $('#pNombre').text(nombre);
        $('#pDetalle').text(detalle);
        $('#pCantidad').text(cantidad);
        $('#pPrecio').text(precio);
        $('#pCategoria').text(categoria);
        $('#pVisible').text(visible);
    });

    $('.btnEliminar').click(function () {

        var nombre = $(this).parents('tr').find('td')[0].innerHTML;
        var detalle = $(this).parents('tr').find('td')[1].innerHTML;
        var idCategoria = $(this).parents('tr').attr('id');

        $('#pENombre').text(nombre);
        $('#pEDetalle').text(detalle);
        $('#txtIDEliminar').val(idCategoria);
    });


    $('.btnEditar').click(function () {

        var nombre = $(this).parents('tr').find('td')[0].innerHTML;
        var detalle = $(this).parents('tr').find('td')[1].innerHTML;
        var idCategoria = $(this).parents('tr').attr('id');
        var cantidad = $(this).parents('tr').find('td')[2].innerHTML;
        var precio = $(this).parents('tr').find('td')[3].innerHTML;


        $('#txtNombre').val(nombre);
        $('#txtDetalle').val(detalle);
        $('#txtID').val(idCategoria);
        $('#txtcantidad').val(cantidad);
        $('#txtprecio').val(precio);


        Materialize.updateTextFields();
    });
       $( '#opcion' ).on( 'click', function() {
    if( $(this).is(':checked') ){
        // Hacer algo si el checkbox ha sido seleccionado
        
        $('#disponible').val("Visible");
    } else {
        // Hacer algo si el checkbox ha sido deseleccionado
       
        $('#disponible').val("No Visible");
    }
});
});

        </script>

    </body>
</html>
